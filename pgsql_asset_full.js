import{_ as t,c as o,o as r,af as a}from"./chunks/framework.W5ZyBR1w.js";const p=JSON.parse('{"title":"PostgreSQL-backed Configuration and Token Store","description":"","frontmatter":{},"headers":[],"relativePath":"configuration/storage/pgsql.md","filePath":"en/configuration/storage/pgsql.md"}'),n={name:"configuration/storage/pgsql.md"};function s(d,e,i,c,l,g){return r(),o("div",null,[...e[0]||(e[0]=[a('<h1 id="postgresql-backed-configuration-and-token-store" tabindex="-1">PostgreSQL-backed Configuration and Token Store <a class="header-anchor" href="#postgresql-backed-configuration-and-token-store" aria-label="Permalink to â??PostgreSQL-backed Configuration and Token Storeâ?">â??</a></h1><p>You can also persist configuration and authentication data in PostgreSQL when running CLIProxyAPI in hosted environments that favor managed databases over local files.</p><p><strong>Environment Variables</strong></p><table tabindex="0"><thead><tr><th>Variable</th><th>Required</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td><code>MANAGEMENT_PASSWORD</code></td><td>Yes</td><td></td><td>Password for the management web UI (required when remote management is enabled).</td></tr><tr><td><code>PGSTORE_DSN</code></td><td>Yes</td><td></td><td>PostgreSQL connection string (e.g. <code>postgresql://user:pass@host:5432/db</code>).</td></tr><tr><td><code>PGSTORE_SCHEMA</code></td><td>No</td><td>public</td><td>Schema where the tables will be created. Leave empty to use the default schema.</td></tr><tr><td><code>PGSTORE_LOCAL_PATH</code></td><td>No</td><td>Current working directory</td><td>Root directory for the local mirror; the server writes to <code>&lt;value&gt;/pgstore</code>. If unset and CWD is unavailable, <code>/tmp/pgstore</code> is used.</td></tr></tbody></table><p><strong>How it Works</strong></p><ol><li><strong>Initialization:</strong> On startup the server connects via <code>PGSTORE_DSN</code>, ensures the schema exists, and creates the <code>config_store</code> / <code>auth_store</code> tables when missing.</li><li><strong>Local Mirror:</strong> A writable cache at <code>&lt;PGSTORE_LOCAL_PATH or CWD&gt;/pgstore</code> mirrors <code>config/config.yaml</code> and <code>auths/</code> so the rest of the application can reuse the existing file-based logic.</li><li><strong>Bootstrapping:</strong> If no configuration row exists, <code>config.example.yaml</code> seeds the database using the fixed identifier <code>config</code>.</li><li><strong>Token Sync:</strong> Changes flow both waysâ??file updates are written to PostgreSQL and database records are mirrored back to disk so watchers and management APIs continue to operate.</li></ol>',6)])])}const f=t(n,[["render",s]]);export{p as __pageData,f as default};

